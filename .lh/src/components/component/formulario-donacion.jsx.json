{
    "sourceFile": "src/components/component/formulario-donacion.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 42,
            "patches": [
                {
                    "date": 1731950867604,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731951120598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,103 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\">\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951527860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,144 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(\"\")\n+  const [itemType, setItemType] = useState(\"\")\n+  const [quantity, setQuantity] = useState(\"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity,\n+      unit: unidad,\n+      valuePerUnit\n+    }\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951676045,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,145 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(\"\")\n+  const [itemType, setItemType] = useState(\"\")\n+  const [quantity, setQuantity] = useState(\"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity,\n+      unit: unidad,\n+      valuePerUnit\n+    }\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+        console.log(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951683151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,145 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(\"\")\n+  const [itemType, setItemType] = useState(\"\")\n+  const [quantity, setQuantity] = useState(\"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity,\n+      unit: unidad,\n+      valuePerUnit\n+    }\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+        \n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951841793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,595 +0,0 @@\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(\"\")\n-  const [itemType, setItemType] = useState(\"\")\n-  const [quantity, setQuantity] = useState(\"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity,\n-      unit: unidad,\n-      valuePerUnit\n-    }\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-        \n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(\"\")\n-  const [itemType, setItemType] = useState(\"\")\n-  const [quantity, setQuantity] = useState(\"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity,\n-      unit: unidad,\n-      valuePerUnit\n-    }\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-        console.log(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(\"\")\n-  const [itemType, setItemType] = useState(\"\")\n-  const [quantity, setQuantity] = useState(\"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-    const charityId = localStorage.getItem('charityId') // Asegúrate de tener el charityId almacenado en algún lugar\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity,\n-      unit: unidad,\n-      valuePerUnit\n-    }\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\">\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState } from 'react'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\">\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951849009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,145 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(\"\")\n+  const [itemType, setItemType] = useState(\"\")\n+  const [quantity, setQuantity] = useState(\"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731951914759,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,8 +78,9 @@\n           'Authorization': `Bearer ${token}`\n         },\n         body: JSON.stringify(donationData)\n       })\n+      lo\n \n       if (!res.ok) {\n         throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n       }\n"
                },
                {
                    "date": 1731951921845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n           'Authorization': `Bearer ${token}`\n         },\n         body: JSON.stringify(donationData)\n       })\n-      lo\n+      console.log\n \n       if (!res.ok) {\n         throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n       }\n"
                },
                {
                    "date": 1731951928445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,146 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent() {\n+  const [unidad, setUnidad] = useState(\"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(\"\")\n+  const [itemType, setItemType] = useState(\"\")\n+  const [quantity, setQuantity] = useState(\"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+      console.log(do)\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Enviar Donación\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731991562848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,149 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/donations/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731992156501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n       valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n     }\n \n     try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/donations/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n         method: initialData ? 'PUT' : 'POST',\n         headers: {\n           'Content-Type': 'application/json',\n           'Authorization': `Bearer ${token}`\n@@ -145,297 +145,5 @@\n         </Button>\n       </form>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(\"\")\n-  const [itemType, setItemType] = useState(\"\")\n-  const [quantity, setQuantity] = useState(\"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-      console.log(do)\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent() {\n-  const [unidad, setUnidad] = useState(\"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(\"\")\n-  const [itemType, setItemType] = useState(\"\")\n-  const [quantity, setQuantity] = useState(\"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(\"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/mercadopago/donations/in-kind', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-      console.log\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Enviar Donación\n-        </Button>\n-      </form>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731992481898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,149 +0,0 @@\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731992730713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,151 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731993268244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,151 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+      console.log('Respuesta:', res)\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731993274819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,9 @@\n           'Authorization': `Bearer ${token}`\n         },\n         body: JSON.stringify(donationData)\n       })\n-      console.log('Respuesta:', res)\n+      console.log\n       if (!res.ok) {\n         throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n       }\n \n@@ -147,156 +147,5 @@\n         </Button>\n       </form>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731993280392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,151 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+      console.log(data)\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731993363969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,302 +0,0 @@\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-      console.log(data)\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData._id}` : ''}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-      console.log\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731994314156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,152 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit), // Asegurarse de que valuePerUnit sea un número\n+      donationId: initialData?.donationId // Incluir donationId si está presente\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData.donationId}` : ''}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731994972653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,152 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit), // Asegurarse de que valuePerUnit sea un número\n+      donationId: initialData?.donationId // Incluir donationId si está presente\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/${initialData ? `report/in-kind/${initialData.donationId}` : 'donations/in-kind'}`, {\n+        method: initialData ? 'PUT' : 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731995227682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,173 +66,26 @@\n       donorName,\n       itemType,\n       quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n       unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit), // Asegurarse de que valuePerUnit sea un número\n-      donationId: initialData?.donationId // Incluir donationId si está presente\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n     }\n \n     console.log('Datos enviados:', donationData)\n \n     try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/${initialData ? `report/in-kind/${initialData.donationId}` : 'donations/in-kind'}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n+      const url = initialData \n+        ? `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        : 'http://localhost:3001/mercadopago/donations/in-kind';\n \n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n+      const method = initialData ? 'PUT' : 'POST';\n \n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n+      const res = await fetch(url, {\n+        method,\n         headers: {\n           'Content-Type': 'application/json',\n           'Authorization': `Bearer ${token}`\n         },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit), // Asegurarse de que valuePerUnit sea un número\n-      donationId: initialData?.donationId // Incluir donationId si está presente\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind${initialData ? `/${initialData.donationId}` : ''}`, {\n-        method: initialData ? 'PUT' : 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n         body: JSON.stringify(donationData)\n       })\n \n       if (!res.ok) {\n"
                },
                {
                    "date": 1731995456519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,164 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731995712414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,164 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (onSave) onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731996047085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,164 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (onSave) onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731996241505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,168 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997338084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,309 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (onSave) onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (onSave) onSave()\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997345478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,164 +100,14 @@\n       }\n \n       const data = await res.json()\n       alert(data.message)\n-      if (onSave) onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      if (initialData) {\n+        onSave()\n       } else {\n-        router.push('/logind')\n+        router.push('/panelcomida')\n       }\n     } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (onSave) onSave()\n-    } catch (error) {\n       console.error('Error al enviar la donación:', error)\n       alert(`Error al enviar la donación: ${error.message}`)\n     }\n   }\n@@ -305,5 +155,14 @@\n             <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n           </div>\n         </div>\n         \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042\n\\ No newline at end of file\n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997522630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,344 +100,8 @@\n       }\n \n       const data = await res.json()\n       alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n       if (onSave) onSave()\n     } catch (error) {\n       console.error('Error al enviar la donación:', error)\n       alert(`Error al enviar la donación: ${error.message}`)\n@@ -487,19 +151,9 @@\n             <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n           </div>\n         </div>\n         \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042'use client'\n \n import { useState, useEffect } from 'react'\n import { useRouter } from 'next/navigation'\n import { Button } from \"@/components/ui/button\"\n@@ -651,335 +305,5 @@\n             <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n           </div>\n         </div>\n         \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      const url = initialData \n-        ? `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        : 'http://localhost:3001/mercadopago/donations/in-kind';\n-\n-      const method = initialData ? 'PUT' : 'POST';\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n\\ No newline at end of file\n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997546736,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,168 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+    console.log('Datos enviados:', donationData)\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      console.error('Error al enviar la donación:', error)\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997816127,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,313 +165,4 @@\n       </form>\n     </div>\n   )\n }\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (onSave) onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-    console.log('Datos enviados:', donationData)\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (onSave) onSave()\n-    } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997835630,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,5 +164,5 @@\n         </Button>\n       </form>\n     </div>\n   )\n-}\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731997841533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,13 +100,9 @@\n       }\n \n       const data = await res.json()\n       alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n+      if (onSave) onSave()\n     } catch (error) {\n       console.error('Error al enviar la donación:', error)\n       alert(`Error al enviar la donación: ${error.message}`)\n     }\n"
                },
                {
                    "date": 1731997854890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,9 +100,13 @@\n       }\n \n       const data = await res.json()\n       alert(data.message)\n-      if (onSave) onSave()\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n     } catch (error) {\n       console.error('Error al enviar la donación:', error)\n       alert(`Error al enviar la donación: ${error.message}`)\n     }\n"
                },
                {
                    "date": 1731998225882,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,8 @@\n       unit: unidad,\n       valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n     }\n \n-    console.log('Datos enviados:', donationData)\n \n     try {\n       let url, method\n \n"
                },
                {
                    "date": 1731998246774,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,8 @@\n       } else {\n         router.push('/panelcomida')\n       }\n     } catch (error) {\n-      console.error('Error al enviar la donación:', error)\n       alert(`Error al enviar la donación: ${error.message}`)\n     }\n   }\n \n"
                },
                {
                    "date": 1732066419763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,166 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732066427217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,166 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        \n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732080002857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,165 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732154125960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,173 +80,8 @@\n         method = 'PUT'\n         donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n       } else {\n         // Crear nueva donación\n-        url = 'https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n         url = 'http://localhost:3001/mercadopago/donations/in-kind'\n         method = 'POST'\n       }\n \n@@ -282,9 +117,8 @@\n   return (\n     <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n       <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n         <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n         <div className=\"space-y-4\">\n           <div>\n             <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n             <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n@@ -327,337 +161,5 @@\n         </Button>\n       </form>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        \n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732154134796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,165 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732168133669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,144 @@\n+'use client';\n+\n+import React, { useState, useEffect } from 'react';\n+import { Button } from \"@/components/ui/button\";\n+import { Input } from \"@/components/ui/input\";\n+import { Textarea } from \"@/components/ui/textarea\";\n+import { Label } from \"@/components/ui/label\";\n+import { useRouter } from 'next/router';\n+\n+export default function FormularioDonacion({ initialData, onSave }) {\n+  const [donorName, setDonorName] = useState('');\n+  const [donationAmount, setDonationAmount] = useState('');\n+  const [donationMessage, setDonationMessage] = useState('');\n+  const [isAuthenticated, setIsAuthenticated] = useState(false);\n+  const [isOrganization, setIsOrganization] = useState(false);\n+  const [loading, setLoading] = useState(true);\n+  const router = useRouter();\n+\n+  useEffect(() => {\n+    const token = localStorage.getItem('authToken');\n+    if (!token) {\n+      setLoading(false);\n+      return;\n+    }\n+\n+    const fetchProfile = async () => {\n+      try {\n+        const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${token}`\n+          },\n+        });\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`);\n+        }\n+\n+        const data = await res.json();\n+\n+        if (data.charity) {\n+          setIsOrganization(true);\n+        }\n+        setIsAuthenticated(true);\n+      } catch (error) {\n+        console.error('Error:', error);\n+      } finally {\n+        setLoading(false);\n+      }\n+    };\n+\n+    fetchProfile();\n+  }, []);\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault();\n+\n+    const donationData = {\n+      donorName,\n+      donationAmount,\n+      donationMessage\n+    };\n+\n+    try {\n+      const res = await fetch('http://localhost:3001/donations', {\n+        method: 'POST',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        },\n+        body: JSON.stringify(donationData)\n+      });\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`);\n+      }\n+\n+      const data = await res.json();\n+      alert(data.message);\n+      if (data.success) {\n+        onSave(); // Cerrar el formulario\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`);\n+    }\n+  };\n+\n+  if (loading) {\n+    return <div>Cargando...</div>;\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>No tienes permiso para realizar donaciones.</div>;\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input\n+              id=\"nombre\"\n+              className=\"border-[#042637] text-[#042637]\"\n+              required\n+              value={donorName}\n+              onChange={(e) => setDonorName(e.target.value)}\n+            />\n+          </div>\n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad de la Donación</Label>\n+            <Input\n+              id=\"cantidad\"\n+              type=\"number\"\n+              className=\"border-[#042637] text-[#042637]\"\n+              required\n+              value={donationAmount}\n+              onChange={(e) => setDonationAmount(e.target.value)}\n+            />\n+          </div>\n+          <div>\n+            <Label htmlFor=\"mensaje\" className=\"text-[#042637]\">Mensaje</Label>\n+            <Textarea\n+              id=\"mensaje\"\n+              className=\"border-[#042637] text-[#042637]\"\n+              value={donationMessage}\n+              onChange={(e) => setDonationMessage(e.target.value)}\n+            />\n+          </div>\n+          <div className=\"flex justify-between\">\n+            <Button type=\"submit\" className=\"bg-[#042637] hover:bg-[#042637]/90 text-white\">\n+              Enviar Donación\n+            </Button>\n+            <Button type=\"button\" onClick={onSave} className=\"bg-red-500 hover:bg-red-600 text-white\">\n+              Cancelar\n+            </Button>\n+          </div>\n+        </div>\n+      </form>\n+    </div>\n+  );\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732168268872,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,165 @@\n+'use client'\n+\n+import { useState, useEffect } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Button } from \"@/components/ui/button\"\n+import { Input } from \"@/components/ui/input\"\n+import { Label } from \"@/components/ui/label\"\n+import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n+\n+export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n+  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n+  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n+  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n+  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n+  const [charityId, setCharityId] = useState(\"\")\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  const handleSubmit = async (e) => {\n+    e.preventDefault()\n+\n+    const token = localStorage.getItem('authToken')\n+\n+    const donationData = {\n+      charityId,\n+      donorName,\n+      itemType,\n+      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n+      unit: unidad,\n+      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n+    }\n+\n+\n+    try {\n+      let url, method\n+\n+      if (initialData && initialData.donationId) {\n+        // Actualizar donación existente\n+        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n+        method = 'PUT'\n+        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n+      } else {\n+        // Crear nueva donación\n+        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n+        method = 'POST'\n+      }\n+\n+      const res = await fetch(url, {\n+        method,\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+        body: JSON.stringify(donationData)\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      alert(data.message)\n+      if (initialData) {\n+        onSave()\n+      } else {\n+        router.push('/panelcomida')\n+      }\n+    } catch (error) {\n+      alert(`Error al enviar la donación: ${error.message}`)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n+      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n+        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n+        <div className=\"space-y-4\">\n+          <div>\n+            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n+            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n+            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n+            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n+            <Select onValueChange={setUnidad} value={unidad} required>\n+              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n+                <SelectValue placeholder=\"Seleccione la unidad\" />\n+              </SelectTrigger>\n+              <SelectContent>\n+                <SelectItem value=\"unidad\">Unidad</SelectItem>\n+                <SelectItem value=\"kg\">Kg</SelectItem>\n+              </SelectContent>\n+            </Select>\n+          </div>\n+          \n+          <div>\n+            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n+            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n+          </div>\n+        </div>\n+        \n+        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n+        </Button>\n+        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n+          Cancelar\n+        </Button>\n+      </form>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1732169335229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n       return\n     }\n \n     try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n         method: 'GET',\n         headers: {\n           'Content-Type': 'application/json',\n           'Authorization': `Bearer ${token}`\n@@ -161,479 +161,5 @@\n         </Button>\n       </form>\n     </div>\n   )\n-}\n-'use client';\n-\n-import React, { useState, useEffect } from 'react';\n-import { Button } from \"@/components/ui/button\";\n-import { Input } from \"@/components/ui/input\";\n-import { Textarea } from \"@/components/ui/textarea\";\n-import { Label } from \"@/components/ui/label\";\n-import { useRouter } from 'next/router';\n-\n-export default function FormularioDonacion({ initialData, onSave }) {\n-  const [donorName, setDonorName] = useState('');\n-  const [donationAmount, setDonationAmount] = useState('');\n-  const [donationMessage, setDonationMessage] = useState('');\n-  const [isAuthenticated, setIsAuthenticated] = useState(false);\n-  const [isOrganization, setIsOrganization] = useState(false);\n-  const [loading, setLoading] = useState(true);\n-  const router = useRouter();\n-\n-  useEffect(() => {\n-    const token = localStorage.getItem('authToken');\n-    if (!token) {\n-      setLoading(false);\n-      return;\n-    }\n-\n-    const fetchProfile = async () => {\n-      try {\n-        const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${token}`\n-          },\n-        });\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`);\n-        }\n-\n-        const data = await res.json();\n-\n-        if (data.charity) {\n-          setIsOrganization(true);\n-        }\n-        setIsAuthenticated(true);\n-      } catch (error) {\n-        console.error('Error:', error);\n-      } finally {\n-        setLoading(false);\n-      }\n-    };\n-\n-    fetchProfile();\n-  }, []);\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault();\n-\n-    const donationData = {\n-      donorName,\n-      donationAmount,\n-      donationMessage\n-    };\n-\n-    try {\n-      const res = await fetch('http://localhost:3001/donations', {\n-        method: 'POST',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        },\n-        body: JSON.stringify(donationData)\n-      });\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`);\n-      }\n-\n-      const data = await res.json();\n-      alert(data.message);\n-      if (data.success) {\n-        onSave(); // Cerrar el formulario\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`);\n-    }\n-  };\n-\n-  if (loading) {\n-    return <div>Cargando...</div>;\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>No tienes permiso para realizar donaciones.</div>;\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input\n-              id=\"nombre\"\n-              className=\"border-[#042637] text-[#042637]\"\n-              required\n-              value={donorName}\n-              onChange={(e) => setDonorName(e.target.value)}\n-            />\n-          </div>\n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad de la Donación</Label>\n-            <Input\n-              id=\"cantidad\"\n-              type=\"number\"\n-              className=\"border-[#042637] text-[#042637]\"\n-              required\n-              value={donationAmount}\n-              onChange={(e) => setDonationAmount(e.target.value)}\n-            />\n-          </div>\n-          <div>\n-            <Label htmlFor=\"mensaje\" className=\"text-[#042637]\">Mensaje</Label>\n-            <Textarea\n-              id=\"mensaje\"\n-              className=\"border-[#042637] text-[#042637]\"\n-              value={donationMessage}\n-              onChange={(e) => setDonationMessage(e.target.value)}\n-            />\n-          </div>\n-          <div className=\"flex justify-between\">\n-            <Button type=\"submit\" className=\"bg-[#042637] hover:bg-[#042637]/90 text-white\">\n-              Enviar Donación\n-            </Button>\n-            <Button type=\"button\" onClick={onSave} className=\"bg-red-500 hover:bg-red-600 text-white\">\n-              Cancelar\n-            </Button>\n-          </div>\n-        </div>\n-      </form>\n-    </div>\n-  );\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `http://localhost:3001/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Button } from \"@/components/ui/button\"\n-import { Input } from \"@/components/ui/input\"\n-import { Label } from \"@/components/ui/label\"\n-import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n-\n-export function FormularioDonacionComponent({ initialData, onClose, onSave }) {\n-  const [unidad, setUnidad] = useState(initialData?.unit || \"\")\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [donorName, setDonorName] = useState(initialData?.donorName || \"\")\n-  const [itemType, setItemType] = useState(initialData?.itemType || \"\")\n-  const [quantity, setQuantity] = useState(initialData?.quantity || \"\")\n-  const [valuePerUnit, setValuePerUnit] = useState(initialData?.valuePerUnit || \"\")\n-  const [charityId, setCharityId] = useState(\"\")\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`https://rwggxws5-3001.brs.devtunnels.ms/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault()\n-\n-    const token = localStorage.getItem('authToken')\n-\n-    const donationData = {\n-      charityId,\n-      donorName,\n-      itemType,\n-      quantity: parseFloat(quantity), // Asegurarse de que quantity sea un número\n-      unit: unidad,\n-      valuePerUnit: parseFloat(valuePerUnit) // Asegurarse de que valuePerUnit sea un número\n-    }\n-\n-\n-    try {\n-      let url, method\n-\n-      if (initialData && initialData.donationId) {\n-        // Actualizar donación existente\n-        url = `https://rwggxws5-3001.brs.devtunnels.ms/mercadopago/report/in-kind/${initialData.donationId}`\n-        method = 'PUT'\n-        donationData.donationId = initialData.donationId // Incluir donationId en el cuerpo de la solicitud\n-      } else {\n-        // Crear nueva donación\n-        url = 'http://localhost:3001/mercadopago/donations/in-kind'\n-        method = 'POST'\n-      }\n-\n-      const res = await fetch(url, {\n-        method,\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-        body: JSON.stringify(donationData)\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error al enviar la donación: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      alert(data.message)\n-      if (initialData) {\n-        onSave()\n-      } else {\n-        router.push('/panelcomida')\n-      }\n-    } catch (error) {\n-      alert(`Error al enviar la donación: ${error.message}`)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n-      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\" onSubmit={handleSubmit}>\n-        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n-        <div className=\"space-y-4\">\n-          <div>\n-            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n-            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required value={donorName} onChange={(e) => setDonorName(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n-            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required value={itemType} onChange={(e) => setItemType(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n-            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={quantity} onChange={(e) => setQuantity(e.target.value)} />\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n-            <Select onValueChange={setUnidad} value={unidad} required>\n-              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n-                <SelectValue placeholder=\"Seleccione la unidad\" />\n-              </SelectTrigger>\n-              <SelectContent>\n-                <SelectItem value=\"unidad\">Unidad</SelectItem>\n-                <SelectItem value=\"kg\">Kg</SelectItem>\n-              </SelectContent>\n-            </Select>\n-          </div>\n-          \n-          <div>\n-            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n-            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required value={valuePerUnit} onChange={(e) => setValuePerUnit(e.target.value)} />\n-          </div>\n-        </div>\n-        \n-        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          {initialData ? 'Actualizar Donación' : 'Enviar Donación'}\n-        </Button>\n-        <Button type=\"button\" onClick={onClose} className=\"w-full mt-2 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n-          Cancelar\n-        </Button>\n-      </form>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                }
            ],
            "date": 1731950867604,
            "name": "Commit-0",
            "content": "'use client'\n\nimport { useState } from 'react'\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n\nexport function FormularioDonacionComponent() {\n  const [unidad, setUnidad] = useState(\"\")\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-[#ECE3D4]\">\n      <form className=\"w-full max-w-md bg-[#ECE3D4] p-8 rounded-lg shadow-md\">\n        <h2 className=\"text-2xl font-bold mb-6 text-[#042637] text-center\">Formulario de Donación</h2>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"nombre\" className=\"text-[#042637]\">Nombre del Donante</Label>\n            <Input id=\"nombre\" className=\"border-[#042637] text-[#042637]\" required />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"producto\" className=\"text-[#042637]\">Tipo de Producto</Label>\n            <Input id=\"producto\" className=\"border-[#042637] text-[#042637]\" required />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"cantidad\" className=\"text-[#042637]\">Cantidad</Label>\n            <Input id=\"cantidad\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"unidad\" className=\"text-[#042637]\">Unidad</Label>\n            <Select onValueChange={setUnidad} required>\n              <SelectTrigger className=\"border-[#042637] text-[#042637]\">\n                <SelectValue placeholder=\"Seleccione la unidad\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"unidad\">Unidad</SelectItem>\n                <SelectItem value=\"kg\">Kg</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"valor\" className=\"text-[#042637]\">Valor por {unidad || 'unidad'}</Label>\n            <Input id=\"valor\" type=\"number\" min=\"0\" step=\"0.01\" className=\"border-[#042637] text-[#042637]\" required />\n          </div>\n        </div>\n        \n        <Button type=\"submit\" className=\"w-full mt-6 bg-[#E1DDBF] text-[#042637] hover:bg-[#ECE3D4] hover:text-[#042637] border border-[#042637]\">\n          Enviar Donación\n        </Button>\n      </form>\n    </div>\n  )\n}"
        }
    ]
}