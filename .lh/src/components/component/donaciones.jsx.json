{
    "sourceFile": "src/components/component/donaciones.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1731024358197,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1731024358197,
            "name": "Commit-0",
            "content": "'use client'\n\nimport { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\n\n// Función para formatear fechas\nconst formatDate = (dateString) => {\n  return new Date(dateString).toLocaleString('es-ES', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\n// Función para formatear montos\nconst formatAmount = (amount, currency) => {\n  return new Intl.NumberFormat('es-ES', { style: 'currency', currency: currency }).format(amount);\n};\n\nexport default function TablaDonaciones() {\n  const [donaciones, setDonaciones] = useState([]);\n  const [error, setError] = useState('');\n  const searchParams = useSearchParams();\n  const charityId = searchParams.get('charityId');\n\n  useEffect(() => {\n    const fetchDonaciones = async () => {\n      try {\n        const res = await fetch(`http://localhost:3001/mercadopago/donations/${charityId}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (!res.ok) {\n          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`);\n        }\n\n        const data = await res.json();\n        setDonaciones(data);\n      } catch (error) {\n        console.error('Error:', error);\n        setError('Error fetching donations');\n      }\n    };\n\n    if (charityId) {\n      fetchDonaciones();\n    }\n  }, [charityId]);\n\n  if (error) return <p className=\"text-red-500\">{error}</p>;\n  if (donaciones.length === 0) return <p>Loading...</p>;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#ECE3D4] to-[#E1DDBF] p-8\">\n      <Card className=\"max-w-6xl mx-auto\" style={{ backgroundColor: '#D8C7A9' }}>\n        <CardHeader>\n          <CardTitle className=\"text-2xl font-bold  bg-[#042637]\">Registro de Donaciones</CardTitle>\n          <CardDescription className=\" bg-[#042637]/70\">\n            Tabla con todas las donaciones recibidas\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead className=\"text-[#042637]\">Donante</TableHead>\n                  <TableHead className=\"text-[#042637]\">Monto</TableHead>\n                  <TableHead className=\"text-[#042637]\">Estado</TableHead>\n                  <TableHead className=\"text-[#042637]\">Método de Pago</TableHead>\n                  <TableHead className=\"text-[#042637]\">Fecha de Pago</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {donaciones.map((donacion, index) => (\n                  <TableRow key={index}>\n                    <TableCell className=\"font-medium text-[#042637]\">{donacion.donorName}</TableCell>\n                    <TableCell className=\"text-[#042637]\">{formatAmount(donacion.amount, donacion.currency)}</TableCell>\n                    <TableCell>\n                      <Badge \n                        variant=\"outline\" \n                        className={`\n                          ${donacion.paymentStatus === 'approved' ? 'bg-green-100 text-green-800 border-green-300' : ''}\n                          ${donacion.paymentStatus === 'pending' ? 'bg-yellow-100 text-yellow-800 border-yellow-300' : ''}\n                        `}\n                      >\n                        {donacion.paymentStatus}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-[#042637]\">{donacion.paymentMethod}</TableCell>\n                    <TableCell className=\"text-[#042637]\">{formatDate(donacion.paymentDate)}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"
        }
    ]
}