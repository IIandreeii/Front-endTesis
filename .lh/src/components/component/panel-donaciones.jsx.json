{
    "sourceFile": "src/components/component/panel-donaciones.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 19,
            "patches": [
                {
                    "date": 1731952718189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1731952991574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,169 +0,0 @@\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b)\n-  }, [donaciones])\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#042637]\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">${totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#042637]\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#042637]\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">${mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-[#042637]\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-[#042637]\">Donante</TableHead>\n-                <TableHead className=\"text-[#042637]\">Producto</TableHead>\n-                <TableHead className=\"text-[#042637]\">Cantidad</TableHead>\n-                <TableHead className=\"text-[#042637]\">Unidad</TableHead>\n-                <TableHead className=\"text-[#042637]\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-[#042637]\">Total</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">${donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">${donacion.totalValue.toFixed(2)}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953154497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,170 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n"
                },
                {
                    "date": 1731953161634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,4 +167,5 @@\n         </CardContent>\n       </Card>\n     </div>\n   )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953212852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,9 +146,11 @@\n                 <TableHead className=\"text-white\">Donante</TableHead>\n                 <TableHead className=\"text-white\">Producto</TableHead>\n                 <TableHead className=\"text-white\">Cantidad</TableHead>\n                 <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor \n+                  \n+                </TableHead>\n                 <TableHead className=\"text-white\">Total</TableHead>\n               </TableRow>\n             </TableHeader>\n             <TableBody>\n"
                },
                {
                    "date": 1731953222325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,172 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad/kg\n+                </TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953812553,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953840361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-red\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953852687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,9 @@\n       </div>\n \n       <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n         <CardHeader>\n-          <CardTitle className=\"text-red\">Lista de Donaciones</CardTitle>\n+          <CardTitle className=\"bg-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n         </CardHeader>\n         <CardContent>\n           <Table>\n             <TableHeader>\n@@ -209,563 +209,5 @@\n         </CardContent>\n       </Card>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad/kg\n-                </TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor \n-                  \n-                </TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953863151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,9 @@\n       </div>\n \n       <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n         <CardHeader>\n-          <CardTitle className=\"bg-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n+          <CardTitle className=\"text-E1DDBF\">Lista de Donaciones</CardTitle>\n         </CardHeader>\n         <CardContent>\n           <Table>\n             <TableHeader>\n"
                },
                {
                    "date": 1731953872636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953937031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953950379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953957559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n       \n       <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n         <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n           <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n           </CardHeader>\n           <CardContent>\n             <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n           </CardContent>\n@@ -209,644 +209,5 @@\n         </CardContent>\n       </Card>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-white\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-E1DDBF\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953965142,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,9 @@\n       </div>\n \n       <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n         <CardHeader>\n-          <CardTitle className=\"text-white\">Lista de Donaciones</CardTitle>\n+          <CardTitle className=\"[#E1DDBF]\">Lista de Donaciones</CardTitle>\n         </CardHeader>\n         <CardContent>\n           <Table>\n             <TableHeader>\n"
                },
                {
                    "date": 1731953977507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#E1DDBF]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731953991264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731954007986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,9 +163,9 @@\n         </Card>\n       </div>\n       \n       <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#E1DDBF] text-white\">\n           Reporte Semanal\n         </Button>\n         <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n           Reporte Mensual\n@@ -209,431 +209,5 @@\n         </CardContent>\n       </Card>\n     </div>\n   )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"text-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#E1DDBF]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n-}\n-'use client'\n-\n-import { useState, useEffect, useMemo } from 'react'\n-import { useRouter } from 'next/navigation'\n-import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n-import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n-import { Button } from \"@/components/ui/button\"\n-\n-export function PanelDonacionesComponent() {\n-  const [donaciones, setDonaciones] = useState([])\n-  const [isAuthenticated, setIsAuthenticated] = useState(false)\n-  const [isOrganization, setIsOrganization] = useState(false)\n-  const [charityId, setCharityId] = useState(\"\")\n-  const [totalValue, setTotalValue] = useState(0)\n-  const router = useRouter()\n-\n-  const checkAuthentication = async () => {\n-    const token = localStorage.getItem('authToken')\n-    if (!token) {\n-      router.push('/logind')\n-      return\n-    }\n-\n-    try {\n-      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/json',\n-          'Authorization': `Bearer ${token}`\n-        },\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const data = await res.json()\n-      if (data.charity && data.charity.userType === 'charity') {\n-        setIsAuthenticated(true)\n-        setIsOrganization(true)\n-        setCharityId(data.charity.id) // Guardar charityId en el estado\n-      } else {\n-        router.push('/logind')\n-      }\n-    } catch (error) {\n-      console.error('Error obteniendo el usuario:', error)\n-      router.push('/logind')\n-    }\n-  }\n-\n-  useEffect(() => {\n-    checkAuthentication()\n-  }, [])\n-\n-  useEffect(() => {\n-    const fetchDonaciones = async () => {\n-      if (!charityId) return\n-\n-      try {\n-        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n-          method: 'GET',\n-          headers: {\n-            'Content-Type': 'application/json',\n-            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-          }\n-        })\n-\n-        if (!res.ok) {\n-          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n-        }\n-\n-        const data = await res.json()\n-        setDonaciones(data.report)\n-        setTotalValue(data.totalValue)\n-      } catch (error) {\n-        console.error('Error fetching donations:', error)\n-      }\n-    }\n-\n-    if (isAuthenticated && isOrganization) {\n-      fetchDonaciones()\n-    }\n-  }, [charityId, isAuthenticated, isOrganization])\n-\n-  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n-\n-  const mayorDonante = useMemo(() => {\n-    if (donaciones.length === 0) return [\"N/A\", 0]\n-\n-    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n-      if (!acc[donacion.donorName]) {\n-        acc[donacion.donorName] = 0\n-      }\n-      acc[donacion.donorName] += donacion.totalValue\n-      return acc\n-    }, {})\n-\n-    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n-  }, [donaciones])\n-\n-  const handleGenerateReport = async (period) => {\n-    try {\n-      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n-        method: 'GET',\n-        headers: {\n-          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n-          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n-        }\n-      })\n-\n-      if (!res.ok) {\n-        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n-      }\n-\n-      const blob = await res.blob()\n-      const url = window.URL.createObjectURL(blob)\n-      const a = document.createElement('a')\n-      a.href = url\n-      a.download = `reporte_${period}_${charityId}.xlsx`\n-      document.body.appendChild(a)\n-      a.click()\n-      a.remove()\n-    } catch (error) {\n-      console.error('Error generating report:', error)\n-    }\n-  }\n-\n-  if (!isAuthenticated || !isOrganization) {\n-    return <div>Cargando...</div>\n-  }\n-\n-  return (\n-    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n-      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n-      \n-      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-        \n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n-          </CardContent>\n-        </Card>\n-\n-        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-          <CardHeader>\n-            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n-          </CardHeader>\n-          <CardContent>\n-            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n-            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n-          </CardContent>\n-        </Card>\n-      </div>\n-      \n-      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n-        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n-          Reporte Semanal\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n-          Reporte Mensual\n-        </Button>\n-        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n-          Reporte Anual\n-        </Button>\n-      </div>\n-\n-      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n-        <CardHeader>\n-          <CardTitle className=\"[#E1DDBF]\">Lista de Donaciones</CardTitle>\n-        </CardHeader>\n-        <CardContent>\n-          <Table>\n-            <TableHeader>\n-              <TableRow>\n-                <TableHead className=\"text-white\">Donante</TableHead>\n-                <TableHead className=\"text-white\">Producto</TableHead>\n-                <TableHead className=\"text-white\">Cantidad</TableHead>\n-                <TableHead className=\"text-white\">Unidad</TableHead>\n-                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n-                <TableHead className=\"text-white\">Total</TableHead>\n-                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n-              </TableRow>\n-            </TableHeader>\n-            <TableBody>\n-              {donaciones.map((donacion, index) => (\n-                <TableRow key={index}>\n-                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n-                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n-                </TableRow>\n-              ))}\n-            </TableBody>\n-          </Table>\n-        </CardContent>\n-      </Card>\n-    </div>\n-  )\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731954020605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-white\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-white\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-white\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1731954026945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,213 @@\n+'use client'\n+\n+import { useState, useEffect, useMemo } from 'react'\n+import { useRouter } from 'next/navigation'\n+import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\n+import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n+import { Button } from \"@/components/ui/button\"\n+\n+export function PanelDonacionesComponent() {\n+  const [donaciones, setDonaciones] = useState([])\n+  const [isAuthenticated, setIsAuthenticated] = useState(false)\n+  const [isOrganization, setIsOrganization] = useState(false)\n+  const [charityId, setCharityId] = useState(\"\")\n+  const [totalValue, setTotalValue] = useState(0)\n+  const router = useRouter()\n+\n+  const checkAuthentication = async () => {\n+    const token = localStorage.getItem('authToken')\n+    if (!token) {\n+      router.push('/logind')\n+      return\n+    }\n+\n+    try {\n+      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/json',\n+          'Authorization': `Bearer ${token}`\n+        },\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const data = await res.json()\n+      if (data.charity && data.charity.userType === 'charity') {\n+        setIsAuthenticated(true)\n+        setIsOrganization(true)\n+        setCharityId(data.charity.id) // Guardar charityId en el estado\n+      } else {\n+        router.push('/logind')\n+      }\n+    } catch (error) {\n+      console.error('Error obteniendo el usuario:', error)\n+      router.push('/logind')\n+    }\n+  }\n+\n+  useEffect(() => {\n+    checkAuthentication()\n+  }, [])\n+\n+  useEffect(() => {\n+    const fetchDonaciones = async () => {\n+      if (!charityId) return\n+\n+      try {\n+        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n+          method: 'GET',\n+          headers: {\n+            'Content-Type': 'application/json',\n+            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+          }\n+        })\n+\n+        if (!res.ok) {\n+          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n+        }\n+\n+        const data = await res.json()\n+        setDonaciones(data.report)\n+        setTotalValue(data.totalValue)\n+      } catch (error) {\n+        console.error('Error fetching donations:', error)\n+      }\n+    }\n+\n+    if (isAuthenticated && isOrganization) {\n+      fetchDonaciones()\n+    }\n+  }, [charityId, isAuthenticated, isOrganization])\n+\n+  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n+\n+  const mayorDonante = useMemo(() => {\n+    if (donaciones.length === 0) return [\"N/A\", 0]\n+\n+    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n+      if (!acc[donacion.donorName]) {\n+        acc[donacion.donorName] = 0\n+      }\n+      acc[donacion.donorName] += donacion.totalValue\n+      return acc\n+    }, {})\n+\n+    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b, [\"N/A\", 0])\n+  }, [donaciones])\n+\n+  const handleGenerateReport = async (period) => {\n+    try {\n+      const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/excel/${period}/${charityId}`, {\n+        method: 'GET',\n+        headers: {\n+          'Content-Type': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n+          'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n+        }\n+      })\n+\n+      if (!res.ok) {\n+        throw new Error(`Error generating report: ${res.status} ${res.statusText}`)\n+      }\n+\n+      const blob = await res.blob()\n+      const url = window.URL.createObjectURL(blob)\n+      const a = document.createElement('a')\n+      a.href = url\n+      a.download = `reporte_${period}_${charityId}.xlsx`\n+      document.body.appendChild(a)\n+      a.click()\n+      a.remove()\n+    } catch (error) {\n+      console.error('Error generating report:', error)\n+    }\n+  }\n+\n+  if (!isAuthenticated || !isOrganization) {\n+    return <div>Cargando...</div>\n+  }\n+\n+  return (\n+    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n+      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n+      \n+      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Donaciones</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">S/{totalValue.toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+        \n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Total Productos</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n+          </CardContent>\n+        </Card>\n+\n+        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+          <CardHeader>\n+            <CardTitle className=\"text-[#E1DDBF]\">Mayor Donante</CardTitle>\n+          </CardHeader>\n+          <CardContent>\n+            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n+            <p className=\"text-lg text-[#042637]\">S/{mayorDonante[1].toFixed(2)}</p>\n+          </CardContent>\n+        </Card>\n+      </div>\n+      \n+      <div className=\"mb-4 flex flex-wrap justify-end space-x-2\">\n+        <Button onClick={() => handleGenerateReport('weekly')} className=\"bg-[#042637] text-[#E1DDBF]\">\n+          Reporte Semanal\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('monthly')} className=\"bg-[#042637] text-[#E1DDBF]\">\n+          Reporte Mensual\n+        </Button>\n+        <Button onClick={() => handleGenerateReport('annual')} className=\"bg-[#042637] text-[#E1DDBF]\">\n+          Reporte Anual\n+        </Button>\n+      </div>\n+\n+      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n+        <CardHeader>\n+          <CardTitle className=\"text-[#E1DDBF]\">Lista de Donaciones</CardTitle>\n+        </CardHeader>\n+        <CardContent>\n+          <Table>\n+            <TableHeader>\n+              <TableRow>\n+                <TableHead className=\"text-white\">Donante</TableHead>\n+                <TableHead className=\"text-white\">Producto</TableHead>\n+                <TableHead className=\"text-white\">Cantidad</TableHead>\n+                <TableHead className=\"text-white\">Unidad</TableHead>\n+                <TableHead className=\"text-white\">Valor por Unidad</TableHead>\n+                <TableHead className=\"text-white\">Total</TableHead>\n+                <TableHead className=\"text-white\">Fecha y Hora</TableHead>\n+              </TableRow>\n+            </TableHeader>\n+            <TableBody>\n+              {donaciones.map((donacion, index) => (\n+                <TableRow key={index}>\n+                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.valuePerUnit.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">S/{donacion.totalValue.toFixed(2)}</TableCell>\n+                  <TableCell className=\"text-[#042637]\">{new Date(donacion.createdAt).toLocaleString()}</TableCell>\n+                </TableRow>\n+              ))}\n+            </TableBody>\n+          </Table>\n+        </CardContent>\n+      </Card>\n+    </div>\n+  )\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1731952718189,
            "name": "Commit-0",
            "content": "'use client'\n\nimport { useState, useEffect, useMemo } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\n\nexport function PanelDonacionesComponent() {\n  const [donaciones, setDonaciones] = useState([])\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\n  const [isOrganization, setIsOrganization] = useState(false)\n  const [charityId, setCharityId] = useState(\"\")\n  const [totalValue, setTotalValue] = useState(0)\n  const router = useRouter()\n\n  const checkAuthentication = async () => {\n    const token = localStorage.getItem('authToken')\n    if (!token) {\n      router.push('/logind')\n      return\n    }\n\n    try {\n      const res = await fetch(`http://localhost:3001/profile?secret_token=${token}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n      })\n\n      if (!res.ok) {\n        throw new Error(`Error fetching profile: ${res.status} ${res.statusText}`)\n      }\n\n      const data = await res.json()\n      if (data.charity && data.charity.userType === 'charity') {\n        setIsAuthenticated(true)\n        setIsOrganization(true)\n        setCharityId(data.charity.id) // Guardar charityId en el estado\n      } else {\n        router.push('/logind')\n      }\n    } catch (error) {\n      console.error('Error obteniendo el usuario:', error)\n      router.push('/logind')\n    }\n  }\n\n  useEffect(() => {\n    checkAuthentication()\n  }, [])\n\n  useEffect(() => {\n    const fetchDonaciones = async () => {\n      if (!charityId) return\n\n      try {\n        const res = await fetch(`http://localhost:3001/mercadopago/report/in-kind/${charityId}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        })\n\n        if (!res.ok) {\n          throw new Error(`Error fetching donations: ${res.status} ${res.statusText}`)\n        }\n\n        const data = await res.json()\n        setDonaciones(data.report)\n        setTotalValue(data.totalValue)\n      } catch (error) {\n        console.error('Error fetching donations:', error)\n      }\n    }\n\n    if (isAuthenticated && isOrganization) {\n      fetchDonaciones()\n    }\n  }, [charityId, isAuthenticated, isOrganization])\n\n  const totalProductos = donaciones.reduce((acc, donacion) => acc + donacion.quantity, 0)\n\n  const mayorDonante = useMemo(() => {\n    const donantesAgrupados = donaciones.reduce((acc, donacion) => {\n      if (!acc[donacion.donorName]) {\n        acc[donacion.donorName] = 0\n      }\n      acc[donacion.donorName] += donacion.totalValue\n      return acc\n    }, {})\n\n    return Object.entries(donantesAgrupados).reduce((a, b) => a[1] > b[1] ? a : b)\n  }, [donaciones])\n\n  if (!isAuthenticated || !isOrganization) {\n    return <div>Cargando...</div>\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#ECE3D4] p-8\">\n      <h1 className=\"text-3xl font-bold mb-6 text-[#042637] text-center\">Panel de Donaciones</h1>\n      \n      <div className=\"grid gap-6 mb-8 md:grid-cols-3\">\n        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#042637]\">Total Donaciones</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-[#042637]\">${totalValue.toFixed(2)}</p>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#042637]\">Total Productos</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-[#042637]\">{totalProductos}</p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n          <CardHeader>\n            <CardTitle className=\"text-[#042637]\">Mayor Donante</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-xl font-bold text-[#042637]\">{mayorDonante[0]}</p>\n            <p className=\"text-lg text-[#042637]\">${mayorDonante[1].toFixed(2)}</p>\n          </CardContent>\n        </Card>\n      </div>\n      \n      <Card className=\"bg-[#E1DDBF] border-[#042637]\">\n        <CardHeader>\n          <CardTitle className=\"text-[#042637]\">Lista de Donaciones</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"text-[#042637]\">Donante</TableHead>\n                <TableHead className=\"text-[#042637]\">Producto</TableHead>\n                <TableHead className=\"text-[#042637]\">Cantidad</TableHead>\n                <TableHead className=\"text-[#042637]\">Unidad</TableHead>\n                <TableHead className=\"text-[#042637]\">Valor por Unidad</TableHead>\n                <TableHead className=\"text-[#042637]\">Total</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {donaciones.map((donacion, index) => (\n                <TableRow key={index}>\n                  <TableCell className=\"text-[#042637]\">{donacion.donorName}</TableCell>\n                  <TableCell className=\"text-[#042637]\">{donacion.itemType}</TableCell>\n                  <TableCell className=\"text-[#042637]\">{donacion.quantity}</TableCell>\n                  <TableCell className=\"text-[#042637]\">{donacion.unit}</TableCell>\n                  <TableCell className=\"text-[#042637]\">${donacion.valuePerUnit.toFixed(2)}</TableCell>\n                  <TableCell className=\"text-[#042637]\">${donacion.totalValue.toFixed(2)}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}"
        }
    ]
}